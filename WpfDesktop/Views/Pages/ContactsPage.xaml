<Page x:Class="WpfDesktop.Views.Pages.ContactsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:local="clr-namespace:WpfDesktop.Views.Pages"
          ui:Design.Background="{ui:ThemeResource ApplicationBackgroundBrush}"
        ui:Design.Foreground="{ui:ThemeResource TextFillColorPrimaryBrush}"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="ContactsPage">

    <Page.Resources>
        <CollectionViewSource x:Key="LanguagesSource" 
                         Source="{Binding AvailableLanguages}" />
    </Page.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,24">
                <ui:TextBlock
                    Text="Contacts"
                    FontSize="28"
                    FontTypography="Title"/>
                <ui:TextBlock
                    Text="Manage who will receive notifications after MassPost upload"
                    FontSize="14"
                    Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <ui:Card Grid.Row="1" Margin="0,8,0,8">

                <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Left">
                        <!-- Add Button -->
                        <ui:Button
                            Margin="0,0,8,0"
                            Appearance="Secondary"
                            Command="{Binding AddContactCommand}"
                            Icon="{ui:SymbolIcon Symbol=Add24}"
                        >
                            Add
                        </ui:Button>

                        <!-- Add Button -->
                        <ui:Button
                            Appearance="Primary"
                            Command="{Binding SaveCommand}"
                            Icon="{ui:SymbolIcon Symbol=Save24}" >
                            Save
                        </ui:Button>
                    </StackPanel>
            </ui:Card>
            <!-- Search and Add Bar -->
            

            <!-- DataGrid -->
            <ui:Card Grid.Row="2" Margin="0,8,0,0">
                <DataGrid

                    
                    AutoGenerateColumns="False"
                    Background="Transparent"
                    BorderThickness="1"
                    CanUserAddRows="False"
                    CanUserDeleteRows="True"
                    GridLinesVisibility="Horizontal"
                    HeadersVisibility="Column"
                    IsReadOnly="False"
                    ItemsSource="{Binding Contacts}"
                    RowHeaderWidth="0"
                    SelectionMode="Single"
SelectionUnit="FullRow">
                    <DataGrid.Resources>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Foreground" Value="{ui:ThemeResource TextFillColorPrimaryBrush}" />
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{ui:ThemeResource AccentTextFillColorPrimaryBrush }" />
                                    <Setter Property="Foreground" Value="{ui:ThemeResource TextFillColorInverseBrush}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="False">
                                    <Setter Property="Background" Value="{ui:ThemeResource ApplicationBackgroundBrush}" />
                                    <Setter Property="Foreground" Value="{ui:ThemeResource TextFillColorPrimaryBrush}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.Resources>
                    <DataGrid.Columns>
                        <DataGridTextColumn
        Width="*"
        Binding="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
        Header="First Name">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn
        Width="*"
        Binding="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
        Header="Last Name">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn
        Width="*"
        Binding="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
        Header="Email">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn
        Width="*"
        Binding="{Binding Phone, UpdateSourceTrigger=PropertyChanged}"
        Header="Phone">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn
        Width="*"
        Binding="{Binding Mobile, UpdateSourceTrigger=PropertyChanged}"
        Header="Mobile">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="Margin" Value="8,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridComboBoxColumn
        Width="*"
        Header="Language"
            SelectedValueBinding="{Binding LanguageCode}"
             ItemsSource="{Binding Source={StaticResource LanguagesSource}}"
            DisplayMemberPath="."
            SelectedValuePath="."
        />

                        <!-- Delete Button Column -->
                        <DataGridTemplateColumn Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ui:Button
                    Margin="8,0"
                    Padding="8"
                    
                    Background="Transparent"
                    Command="{Binding DataContext.DeleteContactCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                    CommandParameter="{Binding}">
                                        <ui:SymbolIcon Symbol="Delete24" Foreground="DarkRed"/>
                                    </ui:Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </ui:Card>
            
        </Grid>
</Page>
